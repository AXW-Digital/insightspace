phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "docker-compose build"
      - "docker tag src_app 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend"
      - "docker tag src_proxy 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_proxy"

  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend"
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_proxy"

  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiRUFoWnV6amJ3enBhR1h4aFN6RFJaMGVMNDh2dWRmS1hiUDljZy9JT21kdmlqOXZBTjZMT3ljYmQ4SGtkbGRjd0FrTHZlZFE4NEpVQno1d2RzcXpvMk96c3J6OWorTEt2anJDN0VJVVpCR2pqS2ZqdG9RRTluWXBCdEhjWVVCRXg0dGNHTVNiS2tTbi9JNnRxYlZzVk5vQmdQSEh0RUNHQjVNcytRQmdiNzBjSHp5VGlab1o0TUdYK2V6dFhBTHE1ZzV2c3FlNkhJZjA3SmQxRjhJSmJ6ZVM2TVYzUElyUnNmVmNtZEFLelhqMUNpMkt4QmU1MzdSdEJFOE5jNng1MnVlK3JOR1hsYWxVVmtHSUlueTJMRVhoeW9CNmFyNUNMZ2FSN1Mza2FrQjQ5bGhvWmNzT3RHSmN3K2o3RGFlOWljaVdXdVN2U0hUcWZOVlNaQzh2eGlyQVZtWGFsWFNaTnJLL3RPc3RuMmVtQ3NwWU5rbkU3UGZiYTFjRklJYjE3K3RzNnNiaXY5ak9aWEdNdTF0ZDJ0bEdJemRSSENpQXQ0MXp6dXEwN01BdEFqTWFpUlk0bVduc3Nsb2ZTVkdzaEx3Rm1BRVZOM3Jrdk5XbjdyamQxZFB1MFRSV3N4dVZkQVZDU3hsMjhGUDdIWlZPTHpUK29Jd0FBKzlqaDIyUTM3aTQyUzJ0K3BZU1lHUHFXb0xiWmR0eGY5MWJuTUFvSEZ3WGZKSVNHSThFOUdGS2ZrSzRXV3o1RW1qMkUxL0dLTFhvbm9OV05mNWJuYWhqbCszS0pnN2RkQlFsMEkyZlRYd2IxSkw0dnhYdndrQ2VoZjNoeWdXenQzMHF5cCtUNXltNjkxcFlFMDlsL3hFT0xYd3ZaeDlQQ1VNY0FwWUEzeVp3Skk5T3hNYkU0RzNicVpYQnRhOEJGS0ptNnVpeHU1K0g3OHVsQ3ZBVmFqV2xiSjk4N0M3UVpHME42Z3Z0UU9vV1dINUhZaTAxY1BOSkhSMGpkNzI0aW9Qc2JDK0NJOFk2L1gyajk2ZVhlOVhBNmJUL2UvZ1pVeGhQbGtvc0c5czBuL25jNXk1SzdZL1pxZG5vZ1dQMHFYTytBdWd6bHQyMnluaWdhdnF2eXV3QzFvQSthZFRwVFJnNVVuWmJ3aFlwbi82U09ibmVaUjNSZkNFUzFBOXlFYVFNMEdJRFozMFluWGNkTTFBeWIzdzhkTHBjWUxrOTJST3cvUlZTMGZvVjFHMlp4SXJLTUgweUhCSURDcGtQakNvbnVwa0w0aUJqaVY2QjRPMjM4RFNaNDdPdmJJNUFlQUVwSUUzQThYeTFoZHBaVWRYN1FoMEZGbWJMc0RjbUtjY05mL0dyT1RBZExZS3Q1VGJ4OWd4dzFqRldQQVVvb29HaTByRDRnZkVOY3FUZjBvK3RHZXFVOU1lSXordStSZm9aU29US25SRHVmQmZWUXhWRTFOZk1pTjhKYzVaM3pxNmlib3JHa3V3PT0iLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdGaHNLVDNuTzNzVW5oWmZFS3FGaEJjQUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNTjBjUGtRSE1DN1IvT1VuRkFnRVFnRHZVb2tWbThUc1lhRThsWDREMVVYWnNVekhaRWRlQ1RuMldvaUxic0xLK1F4WTA0SEpDMGp3MWJPVDk5cEVtYXZ2TEd0c3hLSXdUdk9VOExBPT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2MTY3MTMxMDB9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
      - "docker login -u axwdigitaldocker -p 075l2q1O!"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1