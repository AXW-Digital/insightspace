phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "docker-compose up --build"
      - "docker tag insightspace_db_1 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_postgres"
      - "docker tag insightspace_app_1 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend"
      - "docker tag insightspace_proxy_1 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_proxy"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend"
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_postgres"
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_proxy"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoieWExRjROQlZ5dTRZaEl0aHhpUzYyM09BV1RTditUMXprRDlpdUM5ZXQxbmhENDZKalV4d0hrVUt5K1pmdk1MczJEU1RuY2sxR2xrQnE2U1JBaXBFU09Xb2g5RHR4RDg0cE9vZHVLTWhqY2hpekhsY3dDRnNiTStzWTkrWnhWMmp1bzVieGhmQlpyUVpHeDN2T1FnTm10bDNibWw0RkNvV2oxeTg2NHEzSjVYWkNmT1ZRSVpKWmFsQjhvTXJwZUNZdmxvdUYxdWxrL1BpUXZONWZDdk0raml6NTlNQ29pVS9DTUFuRUJxNXdKM1VLKzltQUlVQ2R2Y1ltb1R1UDVvMFpiV1hIa2x6ajEzVlBvWm1xbFRlcmpQRld1dEFGeGIxVkg5bXNsQlh1ZkV5bHVrYldhWERZMmJVbjBhTk9FNGFCcXRKOXNDNGt3Ri93N2VDRVZJUFFWWFdBSmFnVlRHNit5SFZzbE15Rlo0ZERGUHJ6SGNjWkUwZ2dvby9CcHIrWFdFcVZJcS9sWDc5SWRTZngwdWJMVFlPL1Awd1V4THoyNkVXL2ZHL216UFVlMEhXWFMzSjh6dVNzNHBNWExQaHNvYTJtdUVyT0lVcWovZVZoNWxOaHpDV243T2VTeDJXSVdpUEk1RzJrYWdjckZqMkY1K0M1cDMwVThYeng2dEl2dDFQUG5NZXQ3QkJ1UW9tYk1obm9NMG5GL25VVFliNWRpRVcyMkdTaW43cVpZUjlEWDYxbCttMUR5bDlOU1hSZzhLY2Y5RTh6L1JZekNpV292MG1XOGRXWlBaMFFoRFN6YkFxWEFSQnl1bTRXSmQweXJPazVmWkJRbksrTjJlYk1RSFh4bVkxeTNFdEVoMTY0TGJ6L1ZTY2hweVoxL05jVGlyTmpwN1d2ekxCRFdYREdwQlNNSGU1bHB1TVRrbVp6Y0V3eHZPUDN3U2s5aGFTOFEvTE5jT1pqVHRpUXJiWk4yN3hOZ21mYm5QWUVEVndPc25HTjQ3TkV2eW9iK21kSmZuTDBKaTlSS3BSaktIMlE2OWJHclluTkh1TG9WaFFidHM2SGtEMUxYczZlRXFUYTRzanRrazVoaHJ3a3pXdXZzS3V0RStlSm53RVRGT1E4aU92dmZabTFzQ1Y5c3JDaks5cmFEZlI3dGNpM2Q0dnlDN05NL2RkNDJYTTdKSXNnUnROV3BzZXFCalkwdmREVHdJRmpXNHFwZmc0TDFqWEYvdjRtTURsMDNackFMU1Q1RE5RNEhORHpLYWczQ1lIUzdxN1dGZTRHRTd4ZlRTUnU5Qlk3UWJzZkdTOFA4NGFSMjNNOHVhOU5oc09icnBNK293bFlYbS9JTVhiMXc0RFdqTFlWTFVacGZEWFBBWFV3K0UyMDZUMy80a0hCNDZiM1Jkc3Rhb0ZPNk8ycEZGMEVCMEN1SG1SRTB5ZW5pZUY2TEFxMXByQmV1RnhlTzFSYXFKY2tENm5uYUs4SGxlK3p3PT0iLCJkYXRha2V5IjoiQVFJQkFIaGZyRlEyYUlJd0Y1VmM3OVJIRVBHbmNVV3VyMi9Kek04dC9aem9FdFJyQWdGaCszdXU2NnVqMEFTaEEvV0hOQzUyQUFBQWZqQjhCZ2txaGtpRzl3MEJCd2FnYnpCdEFnRUFNR2dHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNQnNGVzRML0J0dkp5R2VzdkFnRVFnRHNIUnlpYnE0d1hhN2M3bDBFNTlHWUZrclE4NFp5b2RDanFLakJkYmVFRU82ejJmUWk2VDRjR2dFaHFZV1dUdUtQenJYM1pQeTQ0YVJCM09RPT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE2MTY1NjIzMDl9 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1